---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "nixos_instance Resource - terraform-provider-nixos"
subcategory: ""
description: |-
  NixOS instance
---

# nixos_instance (Resource)

NixOS instance



<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `address` (List of String) List of server addresses
- `configuration` (String) Path to Nix derivation

### Optional

- `derivations` (Block List) List of derivations which is built during apply (see [below for nested schema](#nestedblock--derivations))
- `nix` (Block Set, Max: 1) Nix package manager configuration options (see [below for nested schema](#nestedblock--nix))
- `secret` (Block Set) Describes secret which should be transfered to host (see [below for nested schema](#nestedblock--secret))
- `secrets` (Block Set, Max: 1) Describes secrets settings (see [below for nested schema](#nestedblock--secrets))
- `settings` (String) Optional settings (encoded with HCL function jsonencode()) to pass into Nix configuration derivation as attribute set (any configuration key could be specified)
- `ssh` (Block Set, Max: 1) SSH protocol settings (see [below for nested schema](#nestedblock--ssh))
- `system` (String) Nix arch & target to build for (defaults to x86_64-linux)

### Read-Only

- `id` (String) The ID of this resource.
- `secret_fingerprint` (Map of String) Secrets state fingerprint information which is used to maintain state

<a id="nestedblock--derivations"></a>
### Nested Schema for `derivations`

Optional:

- `outputs` (Map of String) Derivation outputs paths in the Nix store
- `path` (String) Path to the derivation in Nix store


<a id="nestedblock--nix"></a>
### Nested Schema for `nix`

Optional:

- `activation_action` (String) Activation script action, one of: switch|boot|test|dry-activate
- `activation_script` (String) Path to the system profile activation script
- `build_wrapper` (String) Path to the configuration wrapper in Nix language (function which returns drv_path & out_path)
- `cores` (Number) Number of CPU cores  which Nix should use to perform builds
- `mode` (Number) Nix mode (0 - compat, 1 - default)
- `output` (String) System derivation output name
- `profile` (String) Path to the current system profile
- `show_trace` (Boolean) Show Nix package manager trace on error
- `use_substitutes` (Boolean) Whether or not should Nix use substitutes


<a id="nestedblock--secret"></a>
### Nested Schema for `secret`

Required:

- `destination` (String) Secret file destination on the target host
- `source` (String) Secret file on the host which should be transfered to destination

Optional:

- `group` (String) Secret file owner groupname
- `owner` (String) Secret file owner username
- `permissions` (Number) Secret file destination permissions (in octal)


<a id="nestedblock--secrets"></a>
### Nested Schema for `secrets`

Optional:

- `command` (Block Set, Max: 1) Command secrets provider settings (see [below for nested schema](#nestedblock--secrets--command))
- `filesystem` (Block Set, Max: 1) Filesystem secrets provider settings (see [below for nested schema](#nestedblock--secrets--filesystem))
- `gopass` (Block Set, Max: 1) GoPass secrets provider settings (see [below for nested schema](#nestedblock--secrets--gopass))
- `provider` (String) Secrets provider to use, available: [filesystem command gopass]

<a id="nestedblock--secrets--command"></a>
### Nested Schema for `secrets.command`

Required:

- `name` (String) Provider command name (will be looked up in PATH) to use to retrieve secret

Optional:

- `arguments` (List of String) Provider command arguments to prepend to secret source
- `environment` (Map of String) Provider command environment variables


<a id="nestedblock--secrets--filesystem"></a>
### Nested Schema for `secrets.filesystem`


<a id="nestedblock--secrets--gopass"></a>
### Nested Schema for `secrets.gopass`

Optional:

- `store` (String) Password store directory location



<a id="nestedblock--ssh"></a>
### Nested Schema for `ssh`

Optional:

- `bastion` (Block Set, Max: 1) SSH configuration for bastion server (see [below for nested schema](#nestedblock--ssh--bastion))
- `config` (Map of String) SSH configuration map
- `port` (Number) SSH remote port
- `user` (String) SSH remote user name

<a id="nestedblock--ssh--bastion"></a>
### Nested Schema for `ssh.bastion`

Optional:

- `config` (Map of String) SSH configuration map
- `host` (String) SSH remote hostname
- `port` (Number) SSH remote port
- `user` (String) SSH remote user name


